{"version":3,"sources":["webpack:///./components/Icon/index.tsx","webpack:///./components/SearchBar/SearchBar.tsx","webpack:///./components/SearchBar/SearchPanel.tsx","webpack:///./site/pages/Search/index.tsx","webpack:///./components/SearchBar/style/index.scss"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0B;AACU;AACR;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,4CAAK,qBAAqB,YAAY,iDAAU,kEAAkE,aAAa,mCAAmC;AAC9K,qBAAqB,4CAAK;AAC1B;AACA;AACe,qGAAK,WAAW,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBI;AACuB;AACI;AACrC;AACE;AAC5B,gBAAgB,eAAK;AACrB;AACA,aAAa,iCAAW;AACxB,oBAAoB,uBAAM;AAC1B,oBAAoB,uBAAM;AAC1B,aAAa,yBAAQ;AACrB,0BAA0B,uBAAM;AAChC,IAAI,yCAAmB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,cAAc;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,0BAAS;AACb;AACA;AACA;AACA,KAAK;AACL,IAAI,0BAAS;AACb;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,eAAK,uBAAuB,YAAY,oBAAU,wBAAwB,eAAe,iBAAiB;AACtH,QAAQ,eAAK,wBAAwB,0DAA0D;AAC/F,YAAY,eAAK,uBAAuB,iCAAiC;AACzE,gBAAgB,eAAK,eAAe,uBAAI,GAAG,iBAAiB;AAC5D,gBAAgB,eAAK,yBAAyB,8QAA8Q;AAC5T,gBAAgB,eAAK,eAAe,uBAAI,GAAG,sCAAsC;AACjF,YAAY,eAAK,yBAAyB,yDAAyD,uBAAuB,EAAE,EAAE;AAC9H,gBAAgB,eAAK,eAAe,uBAAI,GAAG,iBAAiB;AAC5D,gBAAgB,eAAK;AACrB,QAAQ,eAAK,qBAAqB,+DAA+D;AACjG,CAAC;AACc,uEAAK,gBAAgB,EAAC;;;AClGI;AACL;AACV;AACgB;AACD;AACL;AACR;AAC5B;AACA,sPAAsP,mCAAM;AAC5P,aAAa,iCAAW;AACxB,aAAa,iCAAW;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,eAAK,uBAAuB,YAAY,oBAAU,4BAA4B,iBAAiB,GAAG;AAC9G,QAAQ,eAAK,eAAe,mBAAS,EAAE,qCAAQ,GAAG,SAAS,kFAAkF,mCAAmC,EAAE,2BAA2B;AAC7M,QAAQ,eAAK,eAAe,uBAAI,GAAG,gCAAgC,4BAA4B,SAAS,eAAK,eAAe,2BAAQ,GAAG,+BAA+B,wBAAwB,EAAE,EAAE,mBAAmB,EAAE;AACvN;AACe,yEAAK,kBAAkB,EAAC;;;;;;ACzCA;AACC;AACA;AACC;AACK;AAC9C;AACA;AACA;AACA,aAAa,yBAAQ;AACrB;AACA;AACA,qBAAqB,2CAAc;AACnC;AACA;AACA;AACA;AACA;AACA,YAAY,eAAK,eAAe,uBAAI,GAAG,6CAA6C;AACpF,QAAQ,eAAK,eAAe,qBAAW,GAAG,4EAA4E,yBAAyB,EAAE,EAAE,gBAAgB,QAAQ,eAAK,gCAAgC,EAAE;AAClN;AACe,sHAAU,YAAY,EAAC;;;;;;;;ACpBtC,uC","file":"js/27.chunk.js","sourcesContent":["import React from \"react\";\nimport classNames from \"classnames\";\nimport \"./style/index.scss\";\n/**\n * 图标\n * @description 配合 @svgr/webpack 使用\n * @param props\n */\nfunction Icon(props) {\n    var _a = props.prefixCls, prefixCls = _a === void 0 ? \"weui-icon\" : _a, className = props.className, style = props.style, onClick = props.onClick, icon = props.icon, _b = props.spin, spin = _b === void 0 ? false : _b, children = props.children;\n    var internal = typeof icon === \"string\";\n    var Icon = icon;\n    return (React.createElement(\"i\", { className: classNames(prefixCls, className, internal ? prefixCls + \"-\" + icon : null, { spin: spin }), style: style, onClick: onClick },\n        !internal && React.createElement(Icon, null),\n        children));\n}\nexport default React.memo(Icon);\n","import classNames from \"classnames\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useControll, useDebounceCallback } from \"utils-hooks\";\nimport { Icon } from \"..\";\nimport \"./style/index.scss\";\nvar SearchBar = React.forwardRef(function (props, ref) {\n    var _a = props.prefixCls, prefixCls = _a === void 0 ? \"weui-search-bar\" : _a, className = props.className, style = props.style, _b = props.placeholder, placeholder = _b === void 0 ? \"搜索\" : _b, onChange = props.onChange, onConfirm = props.onConfirm, _c = props.autoFocus, autoFocus = _c === void 0 ? false : _c, onCancel = props.onCancel, onSearch = props.onSearch, _d = props.delay, delay = _d === void 0 ? 200 : _d, _e = props.backfill, backfill = _e === void 0 ? true : _e;\n    var _f = useControll(props, \"value\", \"defaultValue\"), value = _f[0], setValue = _f[1], isControll = _f[2];\n    var typingRef = useRef(false);\n    var searchRef = useRef(\"\");\n    var _g = useState(autoFocus), focus = _g[0], setFocus = _g[1];\n    var inputRef = ref || useRef(null);\n    useDebounceCallback(function () {\n        if (onSearch) {\n            if (backfill) {\n                if (typingRef.current === false) {\n                    onSearch(value);\n                }\n            }\n            else {\n                onSearch(value);\n            }\n        }\n    }, delay, [searchRef.current]);\n    function compositionStartHandle(e) {\n        typingRef.current = true;\n    }\n    function compositionEndHandle(e) {\n        typingRef.current = false;\n    }\n    function changeValue(val) {\n        if (!isControll) {\n            setValue(val);\n        }\n        if (onChange) {\n            onChange(val);\n        }\n    }\n    function searchChangeHandle(event) {\n        var val = event.target.value;\n        searchRef.current = val;\n        changeValue(val);\n    }\n    function focusHandle(e) {\n        setFocus(true);\n    }\n    function clearHandle(event) {\n        changeValue(null);\n        inputFocus();\n    }\n    function cancelHandle() {\n        if (onCancel) {\n            onCancel();\n        }\n        setFocus(false);\n        changeValue(null);\n    }\n    function inputFocus(hide) {\n        if (hide === void 0) { hide = false; }\n        var input = inputRef.current;\n        if (input) {\n            if (hide) {\n                input.blur();\n            }\n            else {\n                input.focus();\n            }\n        }\n    }\n    useEffect(function () {\n        if (autoFocus) {\n            inputFocus();\n        }\n    }, [autoFocus]);\n    useEffect(function () {\n        if (focus) {\n            inputFocus();\n        }\n    }, [focus, inputRef.current]);\n    function submitHandle(event) {\n        if (onConfirm) {\n            onConfirm(value);\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        return false;\n    }\n    return (React.createElement(\"div\", { className: classNames(prefixCls, className, { focus: focus }), style: style },\n        React.createElement(\"form\", { className: prefixCls + \"__form\", onSubmit: submitHandle },\n            React.createElement(\"div\", { className: prefixCls + \"__box\" },\n                React.createElement(Icon, { icon: \"search\" }),\n                React.createElement(\"input\", { ref: inputRef, type: \"search\", className: prefixCls + \"__input\", placeholder: placeholder, autoFocus: autoFocus, onChange: searchChangeHandle, onFocus: focusHandle, value: value || \"\", onCompositionStart: compositionStartHandle, onCompositionEnd: compositionEndHandle }),\n                React.createElement(Icon, { icon: \"clear\", onClick: clearHandle })),\n            React.createElement(\"label\", { className: prefixCls + \"__label\", onClick: function () { return setFocus(true); } },\n                React.createElement(Icon, { icon: \"search\" }),\n                React.createElement(\"span\", null, placeholder))),\n        React.createElement(\"a\", { className: prefixCls + \"__cancel-btn\", onClick: cancelHandle }, \"\\u53D6\\u6D88\")));\n});\nexport default React.memo(SearchBar);\n","import { __assign, __rest } from \"tslib\";\nimport classNames from \"classnames\";\nimport React from \"react\";\nimport { useControll } from \"utils-hooks\";\nimport { List, ListItem } from \"../List\";\nimport SearchBar from \"./SearchBar\";\nimport \"./style/index.scss\";\nfunction SearchPanel(props) {\n    var _a = props.data, data = _a === void 0 ? [] : _a, children = props.children, visible = props.visible, defaultVisible = props.defaultVisible, onVisibleChange = props.onVisibleChange, onPicker = props.onPicker, conver = props.conver, rest = __rest(props, [\"data\", \"children\", \"visible\", \"defaultVisible\", \"onVisibleChange\", \"onPicker\", \"conver\"]);\n    var _b = useControll(props, \"visible\", \"defaultVisible\"), _visible = _b[0], setVisible = _b[1], isVisibleControll = _b[2];\n    var _c = useControll(props, \"value\", \"defaultValue\"), value = _c[0], setValue = _c[1], isControll = _c[2];\n    function changeValue(val) {\n        if (!isControll) {\n            setValue(val);\n        }\n        if (props.onChange) {\n            props.onChange(val);\n        }\n    }\n    function handleVisibleChange(_open) {\n        if (!isVisibleControll) {\n            setVisible(_open);\n        }\n        if (onVisibleChange) {\n            onVisibleChange(_open);\n        }\n    }\n    function pickerHandle(d) {\n        changeValue(conver ? conver(d) : d + \"\");\n        if (onPicker) {\n            onPicker(d);\n        }\n        if (props.onConfirm) {\n            props.onConfirm(d);\n        }\n        handleVisibleChange(false);\n    }\n    return (React.createElement(\"div\", { className: classNames(\"container search-panel\", { show: _visible }) },\n        React.createElement(SearchBar, __assign({}, rest, { value: value, autoFocus: _visible, onChange: changeValue, onCancel: function () { return handleVisibleChange(false); }, onConfirm: pickerHandle })),\n        React.createElement(List, { className: \"searchbar-result\" }, data.map(function (d, i) { return (React.createElement(ListItem, { key: i, onClick: function () { return pickerHandle(d); } }, children(d, i))); }))));\n}\nexport default React.memo(SearchPanel);\n","import { __spreadArrays } from \"tslib\";\nimport React, { useState } from \"react\";\nimport Page from \"site/components/Page\";\nimport { SearchPanel } from \"weui-react\";\nimport { withRouter } from \"react-router-dom\";\nvar DefaultBanks = [\"建设银行\", \"农业银行\"];\nfunction Searchdemo(_a) {\n    var history = _a.history;\n    var _b = useState(DefaultBanks), banks = _b[0], setBanks = _b[1];\n    function searchBanks(str) {\n        if (str) {\n            setBanks(__spreadArrays([str + \"银行\"], DefaultBanks));\n        }\n        else {\n            setBanks(DefaultBanks);\n        }\n    }\n    return (React.createElement(Page, { title: \"Search\", introduce: \"\\u641C\\u7D22\" },\n        React.createElement(SearchPanel, { visible: true, data: banks, onSearch: searchBanks, onConfirm: function () { return history.goBack(); } }, function (d) { return React.createElement(\"span\", null, d); })));\n}\nexport default withRouter(Searchdemo);\n","// extracted by mini-css-extract-plugin"],"sourceRoot":""}