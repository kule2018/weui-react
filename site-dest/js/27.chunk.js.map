{"version":3,"sources":["webpack:///./components/Icon/index.tsx","webpack:///./components/SearchBar/SearchBar.tsx","webpack:///./components/SearchBar/SearchPanel.tsx","webpack:///./site/pages/Search/index.tsx"],"names":["memo","props","_a","prefixCls","className","style","onClick","icon","_b","spin","children","internal","Icon","createElement","SearchBar","forwardRef","ref","placeholder","onChange","onConfirm","_c","autoFocus","onCancel","onSearch","_d","delay","_e","backfill","_f","value","setValue","isControll","typingRef","searchRef","_g","focus","setFocus","inputRef","changeValue","val","inputFocus","hide","input","current","blur","onSubmit","event","stopPropagation","preventDefault","type","target","onFocus","e","onCompositionStart","onCompositionEnd","data","onVisibleChange","visible","defaultVisible","onPicker","conver","rest","_visible","setVisible","isVisibleControll","handleVisibleChange","_open","pickerHandle","d","show","List","map","i","ListItem","key","DefaultBanks","history","banks","setBanks","Page","title","introduce","str","goBack"],"mappings":"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","file":"js/27.chunk.js","sourcesContent":["import React from \"react\";\nimport classNames from \"classnames\";\nimport \"./style/index.scss\";\n/**\n * 图标\n * @description 配合 @svgr/webpack 使用\n * @param props\n */\nfunction Icon(props) {\n    var _a = props.prefixCls, prefixCls = _a === void 0 ? \"weui-icon\" : _a, className = props.className, style = props.style, onClick = props.onClick, icon = props.icon, _b = props.spin, spin = _b === void 0 ? false : _b, children = props.children;\n    var internal = typeof icon === \"string\";\n    var Icon = icon;\n    return (React.createElement(\"i\", { className: classNames(prefixCls, className, internal ? prefixCls + \"-\" + icon : null, { spin: spin }), style: style, onClick: onClick },\n        !internal && React.createElement(Icon, null),\n        children));\n}\nexport default React.memo(Icon);\n","import classNames from \"classnames\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useControll, useDebounceCallback } from \"utils-hooks\";\nimport { Icon } from \"..\";\nimport \"./style/index.scss\";\nvar SearchBar = React.forwardRef(function (props, ref) {\n    var _a = props.prefixCls, prefixCls = _a === void 0 ? \"weui-search-bar\" : _a, className = props.className, style = props.style, _b = props.placeholder, placeholder = _b === void 0 ? \"搜索\" : _b, onChange = props.onChange, onConfirm = props.onConfirm, _c = props.autoFocus, autoFocus = _c === void 0 ? false : _c, onCancel = props.onCancel, onSearch = props.onSearch, _d = props.delay, delay = _d === void 0 ? 200 : _d, _e = props.backfill, backfill = _e === void 0 ? true : _e;\n    var _f = useControll(props, \"value\", \"defaultValue\"), value = _f[0], setValue = _f[1], isControll = _f[2];\n    var typingRef = useRef(false);\n    var searchRef = useRef(\"\");\n    var _g = useState(autoFocus), focus = _g[0], setFocus = _g[1];\n    var inputRef = ref || useRef(null);\n    useDebounceCallback(function () {\n        if (onSearch) {\n            if (backfill) {\n                if (typingRef.current === false) {\n                    onSearch(value);\n                }\n            }\n            else {\n                onSearch(value);\n            }\n        }\n    }, delay, [searchRef.current]);\n    function compositionStartHandle(e) {\n        typingRef.current = true;\n    }\n    function compositionEndHandle(e) {\n        typingRef.current = false;\n    }\n    function changeValue(val) {\n        if (!isControll) {\n            setValue(val);\n        }\n        if (onChange) {\n            onChange(val);\n        }\n    }\n    function searchChangeHandle(event) {\n        var val = event.target.value;\n        searchRef.current = val;\n        changeValue(val);\n    }\n    function focusHandle(e) {\n        setFocus(true);\n    }\n    function clearHandle(event) {\n        changeValue(null);\n        inputFocus();\n    }\n    function cancelHandle() {\n        if (onCancel) {\n            onCancel();\n        }\n        setFocus(false);\n        changeValue(null);\n    }\n    function inputFocus(hide) {\n        if (hide === void 0) { hide = false; }\n        var input = inputRef.current;\n        if (input) {\n            if (hide) {\n                input.blur();\n            }\n            else {\n                input.focus();\n            }\n        }\n    }\n    useEffect(function () {\n        if (autoFocus) {\n            inputFocus();\n        }\n    }, [autoFocus]);\n    useEffect(function () {\n        if (focus) {\n            inputFocus();\n        }\n    }, [focus, inputRef.current]);\n    function submitHandle(event) {\n        if (onConfirm) {\n            onConfirm(value);\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        return false;\n    }\n    return (React.createElement(\"div\", { className: classNames(prefixCls, className, { focus: focus }), style: style },\n        React.createElement(\"form\", { className: prefixCls + \"__form\", onSubmit: submitHandle },\n            React.createElement(\"div\", { className: prefixCls + \"__box\" },\n                React.createElement(Icon, { icon: \"search\" }),\n                React.createElement(\"input\", { ref: inputRef, type: \"search\", className: prefixCls + \"__input\", placeholder: placeholder, autoFocus: autoFocus, onChange: searchChangeHandle, onFocus: focusHandle, value: value || \"\", onCompositionStart: compositionStartHandle, onCompositionEnd: compositionEndHandle }),\n                React.createElement(Icon, { icon: \"clear\", onClick: clearHandle })),\n            React.createElement(\"label\", { className: prefixCls + \"__label\", onClick: function () { return setFocus(true); } },\n                React.createElement(Icon, { icon: \"search\" }),\n                React.createElement(\"span\", null, placeholder))),\n        React.createElement(\"a\", { className: prefixCls + \"__cancel-btn\", onClick: cancelHandle }, \"\\u53D6\\u6D88\")));\n});\nexport default React.memo(SearchBar);\n","import { __assign, __rest } from \"tslib\";\nimport classNames from \"classnames\";\nimport React from \"react\";\nimport { useControll } from \"utils-hooks\";\nimport { List, ListItem } from \"../List\";\nimport SearchBar from \"./SearchBar\";\nimport \"./style/index.scss\";\nfunction SearchPanel(props) {\n    var _a = props.data, data = _a === void 0 ? [] : _a, children = props.children, visible = props.visible, defaultVisible = props.defaultVisible, onVisibleChange = props.onVisibleChange, onPicker = props.onPicker, conver = props.conver, rest = __rest(props, [\"data\", \"children\", \"visible\", \"defaultVisible\", \"onVisibleChange\", \"onPicker\", \"conver\"]);\n    var _b = useControll(props, \"visible\", \"defaultVisible\"), _visible = _b[0], setVisible = _b[1], isVisibleControll = _b[2];\n    var _c = useControll(props, \"value\", \"defaultValue\"), value = _c[0], setValue = _c[1], isControll = _c[2];\n    function changeValue(val) {\n        if (!isControll) {\n            setValue(val);\n        }\n        if (props.onChange) {\n            props.onChange(val);\n        }\n    }\n    function handleVisibleChange(_open) {\n        if (!isVisibleControll) {\n            setVisible(_open);\n        }\n        if (onVisibleChange) {\n            onVisibleChange(_open);\n        }\n    }\n    function pickerHandle(d) {\n        changeValue(conver ? conver(d) : d + \"\");\n        if (onPicker) {\n            onPicker(d);\n        }\n        if (props.onConfirm) {\n            props.onConfirm(d);\n        }\n        handleVisibleChange(false);\n    }\n    return (React.createElement(\"div\", { className: classNames(\"container search-panel\", { show: _visible }) },\n        React.createElement(SearchBar, __assign({}, rest, { value: value, autoFocus: _visible, onChange: changeValue, onCancel: function () { return handleVisibleChange(false); }, onConfirm: pickerHandle })),\n        React.createElement(List, { className: \"searchbar-result\" }, data.map(function (d, i) { return (React.createElement(ListItem, { key: i, onClick: function () { return pickerHandle(d); } }, children(d, i))); }))));\n}\nexport default React.memo(SearchPanel);\n","import { __spreadArrays } from \"tslib\";\nimport React, { useState } from \"react\";\nimport Page from \"site/components/Page\";\nimport { SearchPanel } from \"weui-react\";\nimport { withRouter } from \"react-router-dom\";\nvar DefaultBanks = [\"建设银行\", \"农业银行\"];\nfunction Searchdemo(_a) {\n    var history = _a.history;\n    var _b = useState(DefaultBanks), banks = _b[0], setBanks = _b[1];\n    function searchBanks(str) {\n        if (str) {\n            setBanks(__spreadArrays([str + \"银行\"], DefaultBanks));\n        }\n        else {\n            setBanks(DefaultBanks);\n        }\n    }\n    return (React.createElement(Page, { title: \"Search\", introduce: \"\\u641C\\u7D22\" },\n        React.createElement(SearchPanel, { visible: true, data: banks, onSearch: searchBanks, onConfirm: function () { return history.goBack(); } }, function (d) { return React.createElement(\"span\", null, d); })));\n}\nexport default withRouter(Searchdemo);\n"],"sourceRoot":""}