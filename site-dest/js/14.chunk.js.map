{"version":3,"sources":["webpack:///./components/utils/number-utils.ts","webpack:///./components/Picker/PickerGroup.tsx","webpack:///./components/Picker/Picker.tsx","webpack:///./components/utils/object-utils.ts","webpack:///./components/Picker/style/index.scss","webpack:///./components/Picker/PickerPanel.tsx","webpack:///./site/pages/FeedBack/Picker/index.tsx","webpack:///./components/Form/FormItem.tsx","webpack:///./components/Icon/index.tsx","webpack:///./components/HalfScreenDialog/HalfScreenDialog.tsx","webpack:///./components/utils/array-utils.ts","webpack:///./components/HalfScreenDialog/style/index.scss"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AChBoC;AACa;AACG;AACN;AAClB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,iCAAW;AACxB;AACA,oDAAoD,0BAA0B,EAAE;AAChF;AACA,yBAAyB,uBAAM;AAC/B;AACA;AACA;AACA,wBAAwB,uBAAM;AAC9B,qBAAqB,uBAAM;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,eAAe,UAAU,eAAe,WAAW,sBAAsB;AACpI;AACA;AACA;AACA;AACA;AACA,qBAAqB,KAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,0BAAS;AACb;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,8BAAQ;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,iBAAiB;AAC3E,4BAA4B,4DAA4D;AACxF,KAAK;AACL,YAAY,eAAK,uBAAuB,2GAA2G;AACnJ,QAAQ,eAAK,uBAAuB,kCAAkC;AACtE,QAAQ,eAAK,uBAAuB,uCAAuC;AAC3E,QAAQ,eAAK,uBAAuB,8DAA8D,+DAA+D,EAAE;AACnK;AACA,oBAAoB,eAAK,uBAAuB,YAAY,oBAAU,+BAA+B;AACrG;AACA,kCAAkC;AAClC,SAAS;AACT;AACe,sEAAK,kBAAkB,EAAC;;;ACxGvC;AAAyC;AACH;AACI;AACX;AACwB;AACH;AACJ;AACR;AACZ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oXAAoX,mCAAM;AAC1X,aAAa,iCAAW,iCAAiC,2CAAY;AACrE;AACA,yBAAyB,2CAAY;AACrC,kBAAkB,uBAAM;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,qDAAqD,mCAAmC,EAAE;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,uCAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC,wBAAwB,eAAK,eAAe,kBAAW,GAAG,0IAA0I;AACpM;AACA;AACA;AACA,YAAY,eAAK,eAAe,mCAAgB,EAAE,qCAAQ,GAAG,SAAS,UAAU,eAAK,eAAe,yBAAM,kDAAkD;AAC5J,QAAQ,eAAK,uBAAuB,gCAAgC;AACpE;AACe,4FAAK,aAAa,EAAC;AAClC;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,6DAA6D,sBAAsB,EAAE;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;;;;;;;;;AC5GA;AAAA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;;;;;;;;ACTA,uC;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACU;AACE;AACD;AACJ;AACK;AACzB;AACrB;AACP,6BAA6B,iBAAiB;AAC9C,+BAA+B,iBAAiB;AAChD;AACA;AACA,uCAAuC,2EAAO;AAC9C;AACA;AACA;AACA;AACA,gBAAgB,yEAAiB;AACjC;AACA;AACA,+CAA+C,oCAAoC,EAAE;AACrF;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,kBAAkB,4CAAK;AACvB,mSAAmS,uDAAM,mDAAmD,4DAAM;AAClW,aAAa,sDAAQ,CAAC,+EAAY;AAClC,aAAa,uEAAW;AACxB,uBAAuB,qEAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,uDAAS;AACb;AACA;AACA;AACA,KAAK;AACL,YAAY,4CAAK,uBAAuB,4BAA4B;AACpE,QAAQ,4CAAK,qBAAqB,gCAAgC,8BAA8B,4CAAK,wBAAwB,2BAA2B;AACxJ,qBAAqB,4CAAK,gCAAgC,8DAAQ,GAAG,SAAS,2EAA2E;AACzJ,CAAC;AACc,qGAAK,kBAAkB,EAAC;;;;;;;;;ACxEvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0B;AACc;AACyB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;A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","file":"js/14.chunk.js","sourcesContent":["/**\n * 限制在 lower 和 upper 之间的值\n * @param i 被限制的值\n * @param min 下限\n * @param max 上限\n */\nexport function clamp(i, min, max) {\n    if (i < min) {\n        return min;\n    }\n    else if (i > max) {\n        return max;\n    }\n    else {\n        return i;\n    }\n}\n","import classNames from \"classnames\";\nimport React, { useEffect, useRef } from \"react\";\nimport { useControll, useMount } from \"utils-hooks\";\nimport { clamp } from \"../utils/number-utils\";\nimport \"./style/index.scss\";\n// 单行选项高度\nvar ITEM_HEIGHT = 48;\n/**\n * 计算偏移\n * @param i\n * @param half\n */\nfunction calcOffset(i) {\n    if (i === -1) {\n        return 96;\n    }\n    return 96 - i * ITEM_HEIGHT;\n}\n/**\n * 计算索引\n * @param offset\n */\nfunction calcIndex(offset) {\n    return Math.round((96 - offset) / ITEM_HEIGHT);\n}\nfunction PickerGroup(props) {\n    var _a = props.prefixCls, prefixCls = _a === void 0 ? \"weui-picker\" : _a, data = props.data, index = props.index, onChange = props.onChange, passive = props.passive;\n    // 中心索引\n    var half = Math.floor(data.length / 2);\n    var _b = useControll(props, \"value\", \"defaultValue\", data[half].value), value = _b[0], setValue = _b[1], isControll = _b[2];\n    // 当前选中索引\n    var currentIndex = data.findIndex(function (x) { return x.value === value; });\n    // 起始touch偏移\n    var startOffsetRef = useRef(0);\n    // 开始偏移\n    var startTranslate = calcOffset(currentIndex);\n    // 移动偏移\n    var moveTranslate = useRef(0);\n    var contentRef = useRef(null);\n    function changeValue(newVal) {\n        if (!isControll) {\n            setValue(newVal);\n        }\n        if (onChange) {\n            onChange(newVal, index);\n        }\n    }\n    function touchStart(event) {\n        var contentEle = contentRef.current;\n        startOffsetRef.current = event.touches[0].clientY;\n        contentEle.style.transition = \"none\";\n    }\n    function touchMove(event) {\n        var target = event.target;\n        var contentEle = contentRef.current;\n        var wrapper = event.currentTarget;\n        var _offset = (event.touches[0].clientY - startOffsetRef.current) * 0.8;\n        target.stopScroll = true;\n        moveTranslate.current = startTranslate + _offset;\n        // console.log(`======move======== 当前translate3d(${startTranslate})  移动偏移(${startTranslate})  计算后偏移(${moveTranslate.current})`);\n        contentEle.style.transform = \"translate3d(0px, \" + moveTranslate.current + \"px, 0px)\";\n    }\n    function touchEnd(event) {\n        var contentEle = contentRef.current;\n        // 限定范围\n        var offset = clamp(moveTranslate.current, calcOffset(data.length - 1), 96);\n        var i = calcIndex(offset);\n        startOffsetRef.current = 0;\n        contentEle.style.transition = \"all 0.3s ease 0s\";\n        if (data[i].disabled) {\n            // 复原\n            contentEle.style.transform = \"translate3d(0px, \" + startTranslate + \"px, 0px)\";\n        }\n        else {\n            contentEle.style.transform = \"translate3d(0px, \" + calcOffset(i) + \"px, 0px)\";\n            changeValue(data[i].value);\n        }\n    }\n    useEffect(function () {\n        // 确保有默认值\n        if (value === null && data.length > 0 && !passive) {\n            changeValue(data[0].value);\n        }\n    }, [value]);\n    useMount(function () {\n        function stopFunc(e) {\n            var target = e.target;\n            if (target && target.stopScroll) {\n                e.preventDefault();\n            }\n        }\n        document.addEventListener(\"touchmove\", stopFunc, { passive: false });\n        return function () { return document.removeEventListener(\"touchmove\", stopFunc); };\n    });\n    return (React.createElement(\"div\", { className: prefixCls + \"__group\", onTouchStart: touchStart, onTouchMove: touchMove, onTouchEnd: touchEnd },\n        React.createElement(\"div\", { className: prefixCls + \"__mask\" }),\n        React.createElement(\"div\", { className: prefixCls + \"__indicator\" }),\n        React.createElement(\"div\", { className: prefixCls + \"__content\", ref: contentRef, style: { transform: \"translate3d(0px, \" + startTranslate + \"px, 0px)\" } }, data.map(function (x, i) {\n            var _a;\n            return (React.createElement(\"div\", { className: classNames(prefixCls + \"__item\", (_a = {},\n                    _a[prefixCls + \"__disabled\"] = x.disabled,\n                    _a)), key: i }, x.label));\n        }))));\n}\nexport default React.memo(PickerGroup);\n","import { __assign, __rest } from \"tslib\";\nimport React, { useRef } from \"react\";\nimport { useControll } from \"utils-hooks\";\nimport Button from \"../Button\";\nimport { HalfScreenDialog } from \"../HalfScreenDialog\";\nimport { fillingArray } from \"../utils/array-utils\";\nimport { isArray } from \"../utils/object-utils\";\nimport PickerGroup from \"./PickerGroup\";\nimport \"./style/index.scss\";\nfunction getValByArray(i, array) {\n    if (i < array.length) {\n        return array[i];\n    }\n    else {\n        return null;\n    }\n}\nfunction Picker(props) {\n    var _a = props.prefixCls, prefixCls = _a === void 0 ? \"weui-picker\" : _a, className = props.className, style = props.style, data = props.data, value = props.value, defaultValue = props.defaultValue, onChange = props.onChange, _b = props.cols, cols = _b === void 0 ? 1 : _b, _c = props.cascade, cascade = _c === void 0 ? false : _c, onConfirm = props.onConfirm, rest = __rest(props, [\"prefixCls\", \"className\", \"style\", \"data\", \"value\", \"defaultValue\", \"onChange\", \"cols\", \"cascade\", \"onConfirm\"]);\n    var _d = useControll(props, \"value\", \"defaultValue\", fillingArray(cols, null)), val = _d[0], setVal = _d[1], isControll = _d[2];\n    // 解决受控模式下,外部传入空导致异常\n    var saveVal = val || fillingArray(cols, null);\n    var lastVal = useRef(saveVal);\n    function changeValue(newVal) {\n        if (!isControll) {\n            setVal(newVal);\n        }\n        if (onChange) {\n            onChange(newVal);\n        }\n    }\n    function changeColValue(colVal, index) {\n        if (cascade) {\n            // 级联时，当前列改变了，后面的值都需要清空\n            lastVal.current = lastVal.current.map(function (x, i) {\n                if (i < index) {\n                    return x;\n                }\n                else if (i === index) {\n                    return colVal;\n                }\n                else {\n                    return null;\n                }\n            });\n            changeValue(lastVal.current);\n        }\n        else {\n            lastVal.current[index] = colVal;\n            changeValue(saveVal.map(function (x, i) { return (i === index ? colVal : x); }));\n        }\n    }\n    function confirmHandle(i) {\n        if (onConfirm) {\n            onConfirm(lastVal.current);\n        }\n        return Promise.resolve();\n    }\n    function createPickerGroups() {\n        if (!data) {\n            return null;\n        }\n        var groups = [];\n        // 多列模式\n        var multiMode = data.length > 0 && isArray(data[0]);\n        // 归一化数据源， 将 多列数据, 单列数据 统一成  PickerItem[][] 多列格式\n        var _data = multiMode ? data : [data];\n        if (cascade) {\n            // 根据当前所选值，创建级联数据\n            _data = createCascadeData(data, saveVal);\n        }\n        for (var i = 0; i < _data.length; ++i) {\n            groups.push(React.createElement(PickerGroup, { key: i, cascade: cascade, data: _data[i], index: i, value: getValByArray(i, saveVal), onChange: changeColValue, passive: !!defaultValue }));\n        }\n        return groups;\n    }\n    return (React.createElement(HalfScreenDialog, __assign({}, rest, { footer: [React.createElement(Button, null, \"\\u786E\\u5B9A\")], onClick: confirmHandle }),\n        React.createElement(\"div\", { className: prefixCls + \"__bd\" }, createPickerGroups())));\n}\nexport default React.memo(Picker);\n/**\n * 创建级联数据\n * @param data\n * @param vals\n */\nexport function createCascadeData(data, vals) {\n    // vals [2, null, null]\n    var cascadeData = [data];\n    var _loop_1 = function (i) {\n        var v = vals[i - 1];\n        if (v !== null) {\n            var prev = cascadeData[i - 1].find(function (x) { return x.value === v; });\n            if (prev && prev.children && prev.children.length > 0) {\n                cascadeData.push(prev.children);\n            }\n        }\n        else {\n            // 使用默认第一个作为默认\n            var prev = cascadeData[i - 1][0];\n            if (prev && prev.children && prev.children.length > 0) {\n                cascadeData.push(prev.children);\n            }\n        }\n    };\n    for (var i = 1; i < vals.length; ++i) {\n        _loop_1(i);\n    }\n    return cascadeData;\n}\n","/**\n * 检测是否纯数组类型\n * @param obj\n */\nexport function isArray(obj) {\n    if (!obj) {\n        return false;\n    }\n    return /Array/.test(Object.prototype.toString.call(obj));\n}\n","// extracted by mini-css-extract-plugin","import { __assign, __rest } from \"tslib\";\nimport React, { useEffect, useState } from \"react\";\nimport { useControll, usePortal } from \"utils-hooks\";\nimport { fillingArray } from \"../utils/array-utils\";\nimport { isArray } from \"../utils/object-utils\";\nimport Picker, { createCascadeData } from \"./Picker\";\nimport \"./style/index.scss\";\nexport function getPickerLabel(pickerValues, data, cascade, separator) {\n    if (cascade === void 0) { cascade = false; }\n    if (separator === void 0) { separator = \"/\"; }\n    var pickerItems = [];\n    // 多列模式\n    var multiMode = data.length > 0 && isArray(data[0]);\n    // 归一化数据源， 将 多列数据, 单列数据 统一成  PickerItem[][] 多列格式\n    var _data = multiMode ? data : [data];\n    if (cascade) {\n        // 根据当前所选值，创建级联数据\n        _data = createCascadeData(data, pickerValues);\n    }\n    var _loop_1 = function (i) {\n        var item = _data[i].find(function (x) { return x.value === pickerValues[i]; });\n        pickerItems.push(item || null);\n    };\n    for (var i = 0; i < _data.length; ++i) {\n        _loop_1(i);\n    }\n    return pickerItems.reduce(function (prev, current) {\n        var colLabel = current ? current.label : \"\";\n        return prev ? \"\" + prev + separator + colLabel : colLabel;\n    }, \"\");\n}\nvar PickerPanel = React.forwardRef(function (props, ref) {\n    var _a = props.placeholder, placeholder = _a === void 0 ? \"请选择\" : _a, onChange = props.onChange, singleLabel = props.singleLabel, _b = props.separator, separator = _b === void 0 ? \"/\" : _b, getContainer = props.getContainer, _c = props.PickerComponent, PickerComponent = _c === void 0 ? Picker : _c, disabledClick = props.disabledClick, rest = __rest(props, [\"placeholder\", \"onChange\", \"singleLabel\", \"separator\", \"getContainer\", \"PickerComponent\", \"disabledClick\"]);\n    var _d = useState(fillingArray(props.cols, null)), vals = _d[0], setVals = _d[1];\n    var _e = useControll(props, \"visible\", \"defaultVisible\"), visible = _e[0], setVisible = _e[1], isVisibleControll = _e[2];\n    var renderPortal = usePortal(\"\", getContainer)[0];\n    function changeVisible(show) {\n        if (!isVisibleControll) {\n            setVisible(show);\n        }\n        if (props.onVisibleChange) {\n            props.onVisibleChange;\n            show;\n        }\n    }\n    function showHandle() {\n        if (!disabledClick) {\n            changeVisible(true);\n        }\n    }\n    function changeHandle(value) {\n        if (onChange) {\n            onChange(value);\n        }\n        setVals(value);\n    }\n    function _getPickerLabel() {\n        var data = props.data, cascade = props.cascade;\n        if (!data) {\n            return null;\n        }\n        return getPickerLabel(vals, data, cascade, separator);\n    }\n    useEffect(function () {\n        if (props.value) {\n            setVals(props.value);\n        }\n    }, [props.value]);\n    return (React.createElement(\"div\", { className: \"picker-panel\" },\n        React.createElement(\"p\", { ref: ref, onClick: showHandle }, !vals || vals[0] === null ? React.createElement(\"span\", { className: \"placeholder\" }, placeholder) : _getPickerLabel()),\n        renderPortal(React.createElement(PickerComponent, __assign({}, rest, { visible: visible, onVisibleChange: changeVisible, onChange: changeHandle })))));\n});\nexport default React.memo(PickerPanel);\n","import React from \"react\";\nimport Page from \"site/components/Page\";\nimport { PickerPanel, Button, FormItem, Form } from \"weui-react\";\n// 级联数据\nvar pickerData = [\n    {\n        label: \"票据\",\n        value: 0,\n        children: [\n            {\n                label: \"飞机票\",\n                value: 100,\n            },\n            {\n                label: \"火车票\",\n                value: 101,\n                disabled: true,\n            },\n            {\n                label: \"的士票\",\n                value: 102,\n            },\n            {\n                label: \"打印票\",\n                value: 103,\n            },\n        ],\n    },\n    {\n        label: \"费用\",\n        value: 2,\n        children: [\n            {\n                label: \"住宿费\",\n                value: 200,\n            },\n            {\n                label: \"礼品费\",\n                value: 201,\n                disabled: true,\n            },\n            {\n                label: \"活动费\",\n                value: 202,\n            },\n            {\n                label: \"通讯费\",\n                value: 203,\n            },\n            {\n                label: \"补助\",\n                value: 204,\n            },\n        ],\n    },\n];\n// 单列数据\nvar pickerDataA = [\n    {\n        label: \"飞机票\",\n        value: 0,\n    },\n    {\n        label: \"火车票(disabled)\",\n        disabled: true,\n        value: 1,\n    },\n    {\n        label: \"的士票\",\n        value: 2,\n    },\n    {\n        label: \"住宿费\",\n        value: 3,\n    },\n    {\n        label: \"礼品费(disabled)\",\n        value: 4,\n        disabled: true,\n    },\n    {\n        label: \"活动费\",\n        value: 5,\n    },\n    {\n        label: \"通讯费\",\n        value: 6,\n    },\n    {\n        label: \"补助\",\n        value: 7,\n    },\n    {\n        label: \"通讯费\",\n        value: 8,\n    },\n    {\n        label: \"其他\",\n        value: 9,\n    },\n];\n// 双列数据\nvar pickerDataB = [\n    [\n        {\n            label: \"飞机票\",\n            value: 100,\n        },\n        {\n            label: \"火车票\",\n            value: 101,\n            disabled: true,\n        },\n        {\n            label: \"的士票\",\n            value: 102,\n        },\n        {\n            label: \"打印票\",\n            value: 103,\n        },\n    ],\n    [\n        {\n            label: \"住宿费\",\n            value: 200,\n        },\n        {\n            label: \"礼品费\",\n            value: 201,\n            disabled: true,\n        },\n        {\n            label: \"活动费\",\n            value: 202,\n        },\n        {\n            label: \"通讯费\",\n            value: 203,\n        },\n        {\n            label: \"补助\",\n            value: 204,\n        },\n    ],\n];\nfunction PickerDemo() {\n    return (React.createElement(Page, { className: \"dialog-demo\", title: \"Picker\", introduce: \"\\u9009\\u62E9\\u5668\" },\n        React.createElement(Form, { title: \"\\u9009\\u62E9\\u5668\", desc: \"\\u5355\\u5217\\u548C\\u591A\\u5217\\u652F\\u4ED8\", opr: React.createElement(React.Fragment, null,\n                React.createElement(Button, { type: \"primary\" }, \"\\u63D0\\u4EA4\")) },\n            React.createElement(FormItem, { prop: \"merchantType\", label: \"\\u5355\\u5217Picker\", arrow: true },\n                React.createElement(PickerPanel, { cols: 1, placeholder: \"\\u8BF7\\u9009\\u62E9\\u7968\\u636E\\u7C7B\\u578B\", title: \"\\u5355\\u5217Picker\", data: pickerDataA })),\n            React.createElement(FormItem, { prop: \"merchantType2\", label: \"\\u53CC\\u5217\\u6570\\u636E\", arrow: true },\n                React.createElement(PickerPanel, { cols: 2, placeholder: \"\\u8BF7\\u9009\\u62E9\\u7968\\u636E\\u7C7B\\u578B\", title: \"\\u53CC\\u5217\\u6570\\u636E\", data: pickerDataB })),\n            React.createElement(FormItem, { prop: \"merchantType3\", label: \"\\u7EA7\\u8054\\u6570\\u636E\", arrow: true },\n                React.createElement(PickerPanel, { cascade: true, cols: 2, placeholder: \"\\u8BF7\\u9009\\u62E9\\u7968\\u636E\\u7C7B\\u578B\", title: \"\\u7EA7\\u8054\\u6570\\u636E\", data: pickerData })))));\n}\nexport default React.memo(PickerDemo);\n","import { __assign, __rest, __spreadArrays } from \"tslib\";\nimport classNames from \"classnames\";\nimport React, { useContext, useRef, useState } from \"react\";\nimport { FormContext, FormItemContext, FormItemField } from \"xy-form\";\nimport { ListItem } from \"../List\";\nimport \"./style/index.scss\";\nfunction FormItem(props) {\n    var _a;\n    var _b = props.prefixCls, prefixCls = _b === void 0 ? \"form-item\" : _b, className = props.className, style = props.style, label = props.label, required = props.required, footer = props.footer, arrow = props.arrow, onClick = props.onClick, children = props.children, head = props.head, disabled = props.disabled, rest = __rest(props, [\"prefixCls\", \"className\", \"style\", \"label\", \"required\", \"footer\", \"arrow\", \"onClick\", \"children\", \"head\", \"disabled\"]);\n    var _c = useState([]), failValidateResult = _c[0], setFailValidateResult = _c[1];\n    var content = useContext(FormContext);\n    var _disabled = content.disabled || props.disabled;\n    // Tips: 通过ref来确保failValidateResult是最新的值, validateChangeHandle函数中failValidateResult总是第一次初始化的值!\n    var lastFailValidateRef = useRef(failValidateResult);\n    var classString = classNames(prefixCls, className, (_a = {},\n        _a[prefixCls + \"-required\"] = required,\n        _a[prefixCls + \"-error\"] = lastFailValidateRef.current.length > 0,\n        _a[\"weui-cell_disabled\"] = _disabled,\n        _a));\n    var _d = useState(typeof props.label === \"string\" ? props.label : null), labelStr = _d[0], setLabel = _d[1];\n    function labelMount(labelElement) {\n        if (!labelStr && labelElement) {\n            setLabel(labelElement.textContent || labelElement.innerText);\n        }\n    }\n    function validateChangeHandle(prop, validateResult) {\n        var lastFailValida = lastFailValidateRef.current;\n        var i = lastFailValida.findIndex(function (x) { return x.prop === prop; });\n        if (validateResult.status) {\n            if (i !== -1) {\n                // 清除上一次验证失败\n                lastFailValidateRef.current = lastFailValida.filter(function (x) { return x.prop !== prop; });\n                setFailValidateResult(lastFailValidateRef.current);\n            }\n        }\n        else {\n            if (i !== -1) {\n                lastFailValida[i].msg = validateResult.msg;\n                setFailValidateResult(__spreadArrays(lastFailValida));\n            }\n            else {\n                lastFailValidateRef.current = __spreadArrays(lastFailValida, [__assign({ prop: prop }, validateResult)]);\n                setFailValidateResult(lastFailValidateRef.current);\n            }\n        }\n    }\n    return (React.createElement(ListItem, { className: classString, style: style, arrow: arrow, footer: footer, onClick: onClick, head: head || (React.createElement(\"label\", { className: \"weui-label\", ref: labelMount }, label)) },\n        React.createElement(FormItemContext.Provider, { value: { onValidateChange: validateChangeHandle, label: labelStr } }, \"prop\" in props ? React.createElement(FormItemField, __assign({}, rest), children) : children)));\n}\nexport default React.memo(FormItem);\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport \"./style/index.scss\";\n/**\n * 图标\n * @description 配合 @svgr/webpack 使用\n * @param props\n */\nfunction Icon(props) {\n    var _a = props.prefixCls, prefixCls = _a === void 0 ? \"weui-icon\" : _a, className = props.className, style = props.style, onClick = props.onClick, icon = props.icon, _b = props.spin, spin = _b === void 0 ? false : _b, children = props.children;\n    var internal = typeof icon === \"string\";\n    var Icon = icon;\n    return (React.createElement(\"i\", { className: classNames(prefixCls, className, internal ? prefixCls + \"-\" + icon : null, { spin: spin }), style: style, onClick: onClick },\n        !internal && React.createElement(Icon, null),\n        children));\n}\nexport default React.memo(Icon);\n","import { __assign, __rest } from \"tslib\";\nimport classNames from \"classnames\";\nimport React, { useState } from \"react\";\nimport { Popup } from \"../Popup\";\nimport Icon from \"../Icon\";\nimport \"./style/index.scss\";\nfunction HalfScreenDialog(props) {\n    var _a = props.prefixCls, prefixCls = _a === void 0 ? \"weui-half-screen-dialog\" : _a, className = props.className, style = props.style, title = props.title, subTitle = props.subTitle, children = props.children, _b = props.footer, footer = _b === void 0 ? [] : _b, more = props.more, onClick = props.onClick, onMoreClick = props.onMoreClick, rest = __rest(props, [\"prefixCls\", \"className\", \"style\", \"title\", \"subTitle\", \"children\", \"footer\", \"more\", \"onClick\", \"onMoreClick\"]);\n    var _c = useState(false), loading = _c[0], setLoading = _c[1];\n    var closeFunc;\n    var getCloseFunc = function (close) {\n        closeFunc = close;\n        if (props.getCloseFunc) {\n            props.getCloseFunc(close);\n        }\n    };\n    function clickHandle(i) {\n        if (onClick) {\n            setLoading(true);\n            onClick(i)\n                .then(function () { return closeFunc(); })\n                .then(function () { return setLoading(false); });\n        }\n        else {\n            closeFunc();\n        }\n    }\n    function moreClickHandle() {\n        if (onMoreClick) {\n            onMoreClick();\n        }\n    }\n    return (React.createElement(Popup, __assign({}, rest, { getCloseFunc: getCloseFunc, animateClassName: \"drill\", popupContentCLassName: prefixCls + \"-wrapper\" }),\n        React.createElement(\"div\", { className: classNames(prefixCls, className), style: style },\n            React.createElement(\"div\", { className: prefixCls + \"__hd\" },\n                React.createElement(\"div\", { className: prefixCls + \"__hd__side\", onClick: close },\n                    React.createElement(Icon, { className: \"weui-icon-btn\", icon: \"btn_close\" }, \"\\u5173\\u95ED\")),\n                React.createElement(\"div\", { className: prefixCls + \"__hd__main\" },\n                    React.createElement(\"strong\", { className: prefixCls + \"__title\" }, title),\n                    subTitle && React.createElement(\"span\", { className: prefixCls + \"__subtitle\" }, subTitle)),\n                more && (React.createElement(\"div\", { className: prefixCls + \"__hd__side\", onClick: moreClickHandle },\n                    React.createElement(Icon, { className: \"weui-icon-btn\", icon: \"btn_more\" }, \"\\u66F4\\u591A\")))),\n            React.createElement(\"div\", { className: prefixCls + \"__bd\" }, children),\n            React.createElement(\"div\", { className: prefixCls + \"__ft\" }, [].concat(footer).map(function (x, i) {\n                return React.cloneElement(x, {\n                    key: i,\n                    loading: loading,\n                    onClick: function () { return clickHandle(i); },\n                });\n            })))));\n}\nexport default React.memo(HalfScreenDialog);\n","/**\n * 填充构造指定长度数组\n * @param size\n * @param val\n */\nexport function fillingArray(size, val) {\n    var array = [];\n    for (var i = 0; i < size; ++i) {\n        array.push(val);\n    }\n    return array;\n}\n","// extracted by mini-css-extract-plugin"],"sourceRoot":""}